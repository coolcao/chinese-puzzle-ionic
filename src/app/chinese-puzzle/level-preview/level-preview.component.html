<div 
  class="bg-wood-lighter dark:bg-dark-wood rounded-lg border border-wood-border dark:border-dark-wood-border p-2 flex items-center justify-center"
>
  <div class="relative" [ngClass]="{
    'w-16 h-20': size === 'small',
    'w-24 h-28': size === 'medium',
    'w-32 h-36': size === 'large'
  }">
    <!-- 棋盘网格背景 -->
    <div class="absolute inset-0 grid grid-cols-4 grid-rows-5 gap-0.5">
      <ng-container *ngFor="let cell of gridCells; let j = index">
        <div class="bg-wood-lighter dark:bg-dark-wood rounded-sm"></div>
      </ng-container>
    </div>

    <!-- 棋子 -->
    <div class="absolute inset-0">
      <ng-container *ngFor="let piece of level.pieces">
        <div
          [ngStyle]="{
            position: 'absolute',
            left: piece.x * 25 + '%',
            top: piece.y * 20 + '%',
            width: piece.width * 25 + '%',
            height: piece.height * 20 + '%'
          }"
          [ngClass]="{
            'bg-wood': piece.name === '曹操',
            'bg-wood-light': piece.name !== '曹操',
            'dark:bg-dark-wood': piece.name === '曹操',
            'dark:bg-dark-wood-light': piece.name !== '曹操',
            'rounded-sm': true,
            flex: true,
            'items-center': true,
            'justify-center': true
          }"
        >
          <span
            [ngClass]="{
              'text-wood-text': true,
              'dark:text-wood-lighter': true,
              'font-bold': piece.name === '曹操',
              'truncate': true,
              'w-full': true,
              'text-center': true,
              'px-0.5': true,
              'text-[4px]': size === 'small',
              'text-[6px]': size === 'medium',
              'text-[8px]': size === 'large',
              'leading-none': true
            }"
          >{{ piece.name }}</span>
        </div>
      </ng-container>
    </div>
  </div>
</div>